<app-headerlogin></app-headerlogin>
<form [formGroup]="userForm">
  <div class="containers">
        <p class="text-center">Registrazione</p>
        <div class="form-group">
          <svg class="icon icon-sm" fill="currentColor">
            <use xlink:href="#it-user"></use>
          </svg>
          <input
            type="email"
            class="form-control"
            id="email"
            placeholder="Email"
            autocomplete="off"
            formControlName="email"
            tabindex="1"
          />
          <div
            class="text-danger"
            *ngIf="
              userForm.get('email').invalid &&
              (userForm.get('email').touched || isFormSubmitted)
            "
          >
            <span *ngIf="userForm.get('email').errors?.['required']"
              >Email richiesta</span
            >
            <span *ngIf="userForm.get('email').errors?.['email']"
              >Inserisci un indirizzo email valido</span
            >
          </div>
        </div>
        <div class="form-group">
          <svg class="icon icon-sm" fill="currentColor">
            <use xlink:href="#it-user"></use>
          </svg>
          <input
            type="text"
            class="form-control"
            id="username"
            placeholder="Username"
            autocomplete="off"
            formControlName="username"
            tabindex="1"
          />
          <div
            class="text-danger"
            *ngIf="
              (userForm.controls['username'].invalid && isFormSubmitted) ||
              userForm.controls['username'].touched ||
              userForm.controls['username'].dirty
            "
          >
            <span *ngIf="userForm.controls['username'].errors?.['required']"
              >Username richiesto</span
            >
            <span *ngIf="userForm.controls['username'].errors?.['minlength']"
              >Inserisci almeno 5 caratteri</span
            >
            <span *ngIf="userForm.controls['username'].errors?.['maxlength']"
              >Inserisci meno di 16 caratteri</span
            >
          </div>
        </div>
        <div class="form-group">
          <svg class="icon icon-sm" fill="currentColor">
            <use xlink:href="#it-key"></use>
          </svg>
          <svg
            class="password-icon-visible icon icon-sm mt-2"
            (click)="togglePasswordVisibility()"
            style="position: absolute; right: 0; top:20"
          >
            <use href="#it-password-visible"></use>
          </svg>
          <input
            type="{{ showPassword ? 'text' : 'password' }}"
            class="form-control"
            id="password"
            placeholder="Password"
            autocomplete="off"
            formControlName="password"
            (keydown)="handleKeyDown($event)"
            tabindex="1"
          />
          <div
            class="text-danger"
            *ngIf="
              userForm.get('password').invalid &&
              (userForm.get('password').touched || isFormSubmitted)
            "
          >
            <span *ngIf="userForm.get('password').errors?.['required']"
              >Password richiesta!
            </span>
            <span *ngIf="userForm.get('password').errors?.['minlength']"
              >Inserisci almeno 8 caratteri!
            </span>
            <span *ngIf="userForm.get('password').errors?.['maxlength']"
              >Inserisci meno di 16 caratteri!
            </span>
            <span *ngIf="userForm.get('password').errors?.['pattern']"
              >La password deve contenere almeno una lettera maiuscola, un
              numero e un carattere speciale!</span
            >
          </div>
        </div>
        <div class="form-group">
          <svg class="icon icon-sm" fill="currentColor">
            <use xlink:href="#it-key"></use>
          </svg>
          
          <input
            type="{{ showPasswordRipetuta ? 'text' : 'password' }}"
            class="form-control"
            id="password"
            placeholder="Conferma Password"
            autocomplete="off"
            formControlName="confermaPassword"
            (keydown)="handleKeyDown($event)"
            tabindex="1"
          />
          <svg
          class="password-icon-visible icon icon-sm mt-2"
          (click)="togglePasswordVisibilityRipetuta()"
          style="position: absolute; right: 0; top:20"
        >
          <use href="#it-password-visible"></use>
        </svg>
          <div
            class="text-danger"
            *ngIf="userForm.get('confermaPassword').errors?.['passwordMismatch'] && (userForm.get('confermaPassword').touched || isFormSubmitted)"
          >
            <span>Password non corrispondente</span>
          </div>
        </div>
        <div class="form-group">
            <select formControlName="ruolo">
              <option value="" disabled selected hidden>Seleziona un ruolo</option>
              <option value="ROLE_ADMIN">ROLE_ADMIN</option>
              <option value="ROLE_USER">ROLE_USER</option>
            </select>
          
        </div>
        <div class="py- 1">
          <div class="btn-example">
            <button
              type="button"
              class="btn btn-primary"
              id="loginButton"
              (click)="onSubmit()"
              [disabled]="!userForm.valid"
            >
              Registrati
            </button>
          </div>
        </div>
      </div>
</form>
